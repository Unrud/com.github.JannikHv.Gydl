{
  "app-id": "com.github.JannikHv.Gydl",
  "runtime": "org.gnome.Platform",
  "runtime-version": "3.24",
  "sdk": "org.gnome.Sdk",
  "command": "gydl",
  "finish-args": [
     "--socket=wayland",
     "--socket=x11",
     "--share=network",
     "--filesystem=xdg-download"
  ],
  "cleanup": [
    "/include",
    "/lib/pkgconfig"
  ],
  "modules": [
    {
      "name": "gydl",
      "buildsystem": "simple",
      "build-commands": [
        "install -m755 src/gydl.py /app/bin/gydl",
        "install -Dm644 src/gydl.desktop /app/share/applications/com.github.JannikHv.Gydl.desktop",
        "install -Dm644 src/com.github.JannikHv.Gydl.appdata.xml /app/share/appdata/com.github.JannikHv.Gydl.appdata.xml"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/JannikHv/gydl.git",
          "commit": "ef5a55afc439c42fe811f7f07247c59b387a513f"
        },
        {
          "type": "shell",
          "commands": [
            "sed -i s:Exec=/usr/bin/gydl:Exec=/app/bin/gydl: src/gydl.desktop"
          ]
        }
      ],
      "modules": [
        {
          "name": "lame",
          "config-opts": [
            "--disable-static",
            "--disable-frontend",
            "--datarootdir=/"
          ],
          "sources": [{
            "type": "archive",
            "url": "https://downloads.sourceforge.net/lame/lame-3.99.5.tar.gz",
            "sha256": "24346b4158e4af3bd9f2e194bb23eb473c75fb7377011523353196b19b9a23ff"
          }]
        },
        {
          "name": "ffmpeg",
          "cleanup": ["/share"],
          "config-opts": [
            "--enable-shared",
            "--disable-static",
            "--disable-doc",
            "--disable-ffplay",
            "--disable-ffserver",
            "--disable-devices",
            "--enable-gnutls",
            "--enable-libmp3lame",
            "--enable-libvorbis"
          ],
          "sources": [{
            "type": "archive",
            "url": "https://ffmpeg.org/releases/ffmpeg-3.3.2.tar.xz",
            "sha256": "1998de1ab32616cbf2ff86efc3f1f26e76805ec5dc51e24c041c79edd8262785"
          }]
        },
        {
          "name": "youtube-dl",
          "no-autogen": true,
          "cleanup": ["/etc", "/share", "/man"],
          "build-options": { "env": { "PREFIX": "/app" } },
          "sources": [{
            "type": "archive",
            "url": "https://github.com/rg3/youtube-dl/releases/download/2017.07.15/youtube-dl-2017.07.15.tar.gz",
            "sha256": "665905606b61cad2f4ac945823722c3bf951f3003f5a24506aea690f4189b5ca"
          }]
        }
      ]
    }
  ]
}
