{
  "app-id": "com.github.JannikHv.Gydl",
  "runtime": "org.gnome.Platform",
  "runtime-version": "3.24",
  "sdk": "org.gnome.Sdk",
  "command": "gydl",
  "rename-icon": "gydl",
  "finish-args": [
     "--socket=wayland",
     "--socket=x11",
     "--share=network",
     "--filesystem=xdg-download"
  ],
  "cleanup": [
    "/include",
    "/lib/pkgconfig"
  ],
  "modules": [
    {
      "name": "gydl",
      "buildsystem": "meson",
      "sources": [{
        "type": "git",
        "url": "https://github.com/JannikHv/gydl.git",
        "branch": "v0.1.1",
        "commit": "087f25fe28d66ac05d7e3d339a412d1f31c9e371"
      }],
      "post-install": [
        "install -Dm644 ../LICENSE /app/share/licenses/gydl/LICENSE"
      ],
      "modules": [
        {
          "name": "lame",
          "rm-configure": true,
          "config-opts": [
            "--disable-static",
            "--disable-frontend"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://downloads.sourceforge.net/lame/lame-3.99.5.tar.gz",
              "sha256": "24346b4158e4af3bd9f2e194bb23eb473c75fb7377011523353196b19b9a23ff"
            },
            {
              "type": "patch",
              "path": "lame-msse.patch"
            },
            {
              "type": "patch",
              "path": "lame-gtk1-ac-directives.patch"
            },
            {
              "type": "patch",
              "path": "lame-ansi2knr2devnull.patch"
            },
            {
              "type": "script",
              "path": "autogen.sh",
              "commands": [
                "autoreconf -vfi"
              ]
            }
          ],
          "post-install": [
            "install -Dm644 LICENSE /app/share/licenses/lame/LICENSE"
          ],
          "cleanup": ["/share/doc", "/share/man"]
        },
        {
          "name": "ffmpeg",
          "config-opts": [
            "--enable-shared",
            "--disable-static",
            "--disable-doc",
            "--disable-ffplay",
            "--disable-ffserver",
            "--disable-devices",
            "--enable-gnutls",
            "--enable-libmp3lame",
            "--enable-libvorbis"
          ],
          "sources": [{
            "type": "archive",
            "url": "https://ffmpeg.org/releases/ffmpeg-3.3.3.tar.xz",
            "sha256": "d2a9002cdc6b533b59728827186c044ad02ba64841f1b7cd6c21779875453a1e"
          }],
          "post-install": [
            "install -Dm644 COPYING.LGPLv3 /app/share/licenses/ffmpeg/COPYING"
          ],
          "cleanup": ["/share/ffmpeg"]
        },
        {
          "name": "youtube-dl",
          "no-autogen": true,
          "build-options": { "env": { "PREFIX": "/app" } },
          "sources": [{
            "type": "archive",
            "url": "https://github.com/rg3/youtube-dl/releases/download/2017.09.02/youtube-dl-2017.09.02.tar.gz",
            "sha256": "699a7ca22243e6a11a3e3a2b4f933c1ec0799d205a58c1eb5b139ee53252d9e9"
          }],
          "cleanup": ["/etc", "/share/zsh"]
        }
      ]
    }
  ]
}
